<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  <title>AI Slot Machine Developer Console</title>
Â  <style>
Â  Â  /* --- Global Styles --- */
Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  /* Replaced image background with a professional dark/light background */
Â  Â  Â  background-color: #f4f7f9; /* Light, neutral background for the main area */
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: row;
Â  Â  Â  height: 100vh;
Â  Â  Â  color: #333;
Â  Â  }

Â  Â  /* --- Sidebar/Navigation --- */
Â  Â  .sidebar {
Â  Â  Â  width: 280px; /* Slightly wider for better button text */
Â  Â  Â  background: #2c3e50; /* Deep blue/grey for a professional, distinct sidebar */
Â  Â  Â  padding: 20px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: stretch;
Â  Â  Â  color: #ecf0f1;
Â  Â  Â  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
Â  Â  }

Â  Â  .sidebar h3 {
Â  Â  Â  margin-top: 0;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  Â  color: #ecf0f1;
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 1.4rem;
Â  Â  Â  border-bottom: 1px solid #34495e;
Â  Â  Â  padding-bottom: 10px;
Â  Â  }

Â  Â  .sidebar button {
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  padding: 12px 14px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 4px; /* Slightly sharper corners */
Â  Â  Â  background-color: #3498db; /* Clear, professional blue */
Â  Â  Â  color: white;
Â  Â  Â  font-size: 15px;
Â  Â  Â  font-weight: 500;
Â  Â  Â  text-align: left;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background-color 0.2s ease, transform 0.1s ease;
Â  Â  }

Â  Â  .sidebar button:hover {
Â  Â  Â  background-color: #2980b9;
Â  Â  Â  transform: translateY(-1px);
Â  Â  }
Â  Â  
Â  Â  /* --- Main Content/Chat Area --- */
Â  Â  #chat {
Â  Â  Â  flex-grow: 1;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 40px;
Â  Â  }

Â  Â  #chatInner {
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 760px; /* Slightly wider chat box */
Â  Â  Â  background: #ffffff; /* Solid white for maximum clarity */
Â  Â  Â  padding: 30px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Lighter shadow */
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  }

Â  Â  h2 {
Â  Â  Â  text-align: center;
Â  Â  Â  color: #2c3e50; /* Matching sidebar color */
Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  font-size: 1.8rem;
Â  Â  Â  font-weight: 300;
Â  Â  }

Â  Â  /* --- Message/Log Area --- */
Â  Â  #messages {
Â  Â  Â  max-height: 400px; /* Taller message box */
Â  Â  Â  overflow-y: auto;
Â  Â  Â  padding: 15px;
Â  Â  Â  border: 1px solid #e0e0e0;
Â  Â  Â  background: #ffffff;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  line-height: 1.6;
Â  Â  }
Â  Â  
Â  Â  #messages::-webkit-scrollbar {
Â  Â  Â  width: 8px;
Â  Â  }
Â  Â  #messages::-webkit-scrollbar-thumb {
Â  Â  Â  background-color: #bdc3c7;
Â  Â  Â  border-radius: 4px;
Â  Â  }


Â  Â  .message {
Â  Â  Â  margin: 8px 0;
Â  Â  Â  font-size: 14px;
Â  Â  Â  padding: 6px 10px;
Â  Â  Â  border-radius: 4px;
Â  Â  }

Â  Â  .user {
Â  Â  Â  color: #34495e; /* Subtle but clear user color */
Â  Â  Â  font-weight: 500;
Â  Â  Â  background-color: #ecf0f1;
Â  Â  }

Â  Â  .bot {
Â  Â  Â  color: #27ae60; /* Professional green for bot */
Â  Â  Â  font-weight: 500;
Â  Â  Â  background-color: #e8f8f5;
Â  Â  }

Â  Â  #waitMessage {
Â  Â  Â  display: none;
Â  Â  Â  color: #95a5a6;
Â  Â  Â  font-style: italic;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 0.9rem;
Â  Â  }

Â  Â  /* --- Input and Send Button --- */
Â  Â  textarea {
Â  Â  Â  padding: 12px;
Â  Â  Â  font-size: 15px;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  resize: vertical;
Â  Â  Â  width: 100%;
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  transition: border-color 0.2s ease;
Â  Â  }

Â  Â  textarea:focus {
Â  Â  Â  border-color: #3498db;
Â  Â  Â  outline: none;
Â  Â  }

Â  Â  button#sendButton {
Â  Â  Â  padding: 12px;
Â  Â  Â  font-size: 16px;
Â  Â  Â  width: 100%;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  background-color: #2ecc71; /* Modern action green */
Â  Â  Â  color: white;
Â  Â  Â  font-weight: 600;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background-color 0.3s ease;
Â  Â  }

Â  Â  #sendButton:hover:enabled {
Â  Â  Â  background-color: #27ae60;
Â  Â  }

Â  Â  #sendButton:disabled {
Â  Â  Â  background-color: #a9dfbf; /* Lighter disabled state */
Â  Â  Â  cursor: not-allowed;
Â  Â  }

Â  Â  /* --- Progress Bar and Links --- */
Â  Â  #progressContainer {
Â  Â  Â  display: none;
Â  Â  Â  margin-top: 15px;
Â  Â  }

Â  Â  #progressBar {
Â  Â  Â  width: 100%;
Â  Â  Â  background-color: #e0e0e0;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  overflow: hidden;
Â  Â  Â  height: 18px; /* Slightly slimmer */
Â  Â  }

Â  Â  #progressFill {
Â  Â  Â  height: 100%;
Â  Â  Â  width: 0%;
Â  Â  Â  background-color: #3498db; /* Blue progress fill */
Â  Â  Â  transition: width 0.5s ease;
Â  Â  Â  text-align: center;
Â  Â  Â  color: white;
Â  Â  Â  line-height: 18px;
Â  Â  Â  font-size: 12px;
Â  Â  }

Â  Â  #links {
Â  Â  Â  display: none;
Â  Â  Â  margin-top: 25px;
Â  Â  Â  text-align: center;
Â  Â  Â  padding-top: 15px;
Â  Â  Â  border-top: 1px solid #eee;
Â  Â  }

Â  Â  #links a {
Â  Â  Â  display: block;
Â  Â  Â  margin: 10px 0;
Â  Â  Â  padding: 14px;
Â  Â  Â  background-color: #e74c3c; /* Red/Orange for clear links */
Â  Â  Â  color: white;
Â  Â  Â  text-decoration: none;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  transition: background-color 0.3s ease;
Â  Â  Â  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
Â  Â  }

Â  Â  #links a:hover {
Â  Â  Â  background-color: #c0392b;
Â  Â  }

Â  Â  /* --- Mobile Responsiveness --- */
Â  Â  @media (max-width: 768px) {
Â  Â  Â  body {
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  }

Â  Â  Â  .sidebar {
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  flex-direction: row;
Â  Â  Â  Â  justify-content: space-around;
Â  Â  Â  Â  padding: 15px 10px;
Â  Â  Â  Â  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
Â  Â  Â  }

Â  Â  Â  .sidebar h3 {
Â  Â  Â  Â  display: none;
Â  Â  Â  }

Â  Â  Â  .sidebar button {
Â  Â  Â  Â  flex-grow: 1;
Â  Â  Â  Â  margin: 0 5px;
Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  padding: 10px;
Â  Â  Â  }

Â  Â  Â  #chat {
Â  Â  Â  Â  padding: 20px;
Â  Â  Â  }

Â  Â  Â  #chatInner {
Â  Â  Â  Â  padding: 20px;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="sidebar">
Â  Â  <h3>ğŸ› ï¸ Developer Tools</h3>
Â  Â  <button onclick="window.open('https://jafar-dot.github.io/slot-machine-analyzer/', '_blank')">ğŸ° Game Mathematician</button>
Â  Â  <button onclick="window.open('https://jafar-dot.github.io/Custom-Slot-Machine/', '_blank')">âš™ï¸ Custom Reels Slot Machine</button>
Â  Â  <button onclick="window.open('', '_blank')">ğŸ“¦ Slot Machine Repository</button>
Â  </div>

Â  <div id="chat">
Â  Â  <div id="chatInner">
Â  Â  Â  <h2>ğŸ¤– AI Slot Machine Developer</h2>
Â  Â  Â  <div id="messages"></div>
Â  Â  Â  <div id="waitMessage">Processing request... Please wait a moment.</div>
Â  Â  Â  <textarea id="messageInput" placeholder="Describe the slot machine you want to create (e.g., 'A 5x3 slot with high volatility and a free spins bonus')..." rows="6"></textarea>
Â  Â  Â  <button id="sendButton" onclick="sendMessage()">Generate Slot Machine</button>
Â  Â  Â Â 
Â  Â  Â  <div id="progressContainer">
Â  Â  Â  Â  <div id="progressBar">
Â  Â  Â  Â  Â  <div id="progressFill"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div id="links">
Â  Â  Â  Â  <h3>Generation Complete!</h3>
Â  Â  Â  Â  <a id="playLink" href="#" target="_blank">â–¶ï¸ Test Game (Live Demo)</a>
Â  Â  Â  Â  <a id="downloadLink" href="#" download>â¬‡ï¸ Download Game Files (ZIP)</a>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  const url="https://hamster-teaching-serval.ngrok-free.app";
Â  Â Â 
Â  Â  const session_id = "user_" + Math.floor(Math.random() * 1000000);
Â  Â  const sendButton = document.getElementById("sendButton");
Â  Â  const progressFill = document.getElementById("progressFill");

Â  Â  function addMessage(text, sender) {
Â  Â  Â  const msgDiv = document.createElement("div");
Â  Â  Â  msgDiv.className = "message " + sender;
Â  Â  Â  // Use innerHTML for better formatting potential in bot responses, but keep textContent for user input for safety.
Â  Â  Â  msgDiv.innerHTML = (sender === "user" ? "You: " : "Bot: ") + text; 
Â  Â  Â  document.getElementById("messages").appendChild(msgDiv);
Â  Â  Â  document.getElementById("messages").scrollTop = document.getElementById("messages").scrollHeight;
Â  Â  }

Â  Â  function sendMessage() {
Â  Â  Â  const input = document.getElementById("messageInput");
Â  Â  Â  const message = input.value.trim();
Â  Â  Â  if (!message || sendButton.disabled) return;

Â  Â  Â  addMessage(message, "user");
Â  Â  Â  input.value = "";
Â  Â  Â  document.getElementById("waitMessage").style.display = "block";
Â  Â  Â  sendButton.disabled = true; // Disable button immediately

Â  Â  Â  fetch(`${url}/receive_message`, {
Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  body: JSON.stringify({ message: message, session_id: session_id })
Â  Â  Â  })
Â  Â  Â  .then(response => response.json())
Â  Â  Â  .then(data => {
Â  Â  Â  Â  if (data.status === "True") {
Â  Â  Â  Â  Â  addMessage(data.reply, "bot");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  addMessage("Error: The API returned an error: " + data.reply, "bot");
Â  Â  Â  Â  Â  sendButton.disabled = false; // Re-enable on API failure
Â  Â  Â  Â  }
Â  Â  Â  Â  document.getElementById("waitMessage").style.display = "none";
Â  Â  Â  })
Â  Â  Â  .catch(err => {
Â  Â  Â  Â  addMessage("Connection error. Could not reach the Slot Machine Developer API. Please check the URL or try again later.", "bot");
Â  Â  Â  Â  document.getElementById("waitMessage").style.display = "none";
Â  Â  Â  Â  sendButton.disabled = false; // Re-enable on connection failure
Â  Â  Â  });
Â  Â  }

Â  Â  function checkStatus() {
Â  Â  Â  fetch(`${url}/get_status`, {
Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  body: JSON.stringify({ session_id: session_id })
Â  Â  Â  })
Â  Â  Â  .then(response => response.json())
Â  Â  Â  .then(data => {
Â  Â  Â  Â  const percent = data.process_percent;
Â  Â  Â  Â  const progressContainer = document.getElementById("progressContainer");
Â  Â  Â  Â  const links = document.getElementById("links");

Â  Â  Â  Â  if (percent > 0 && percent < 100) {
Â  Â  Â  Â  Â  progressContainer.style.display = "block";
Â  Â  Â  Â  Â  links.style.display = "none";
Â  Â  Â  Â  Â  progressFill.style.width = percent + "%";
Â  Â  Â  Â  Â  progressFill.textContent = Math.round(percent) + "% Complete"; // Show percentage in bar
Â  Â  Â  Â  Â  sendButton.disabled = true;
Â  Â  Â  Â  } else if (percent === 100) {
Â  Â  Â  Â  Â  progressFill.style.width = "100%";
Â  Â  Â  Â  Â  progressFill.textContent = "100% Complete";
Â  Â  Â  Â  Â  progressContainer.style.display = "block";
Â  Â  Â  Â  Â  links.style.display = "block";
Â  Â  Â  Â  Â  sendButton.disabled = false; // Re-enable after completion

Â  Â  Â  Â  Â  const baseUrl = url;
Â  Â  Â  Â  Â  const playUrl = `${baseUrl}${data.game_link}`;
Â  Â  Â  Â  Â  const downloadUrl = `${baseUrl}${data.download_link}`;

Â  Â  Â  Â  Â  document.getElementById("playLink").href = playUrl;
Â  Â  Â  Â  Â  document.getElementById("downloadLink").href = downloadUrl;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  // Initial state or after error/completion reset
Â  Â  Â  Â  Â  if (sendButton.disabled) { // Only re-enable if it's currently disabled, otherwise leave it.
Â  Â  Â  Â  Â  Â  sendButton.disabled = false;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  progressContainer.style.display = "none";
Â  Â  Â  Â  Â  links.style.display = "none";
Â  Â  Â  Â  Â  progressFill.style.width = "0%";
Â  Â  Â  Â  Â  progressFill.textContent = "";
Â  Â  Â  Â  }
Â  Â  Â  })
Â  Â  Â  .catch(err => {
Â  Â  Â  Â  console.error("Error checking status:", err);
Â  Â  Â  Â  // Optionally handle status error visually, but don't disrupt main functionality
Â  Â  Â  });
Â  Â  }


Â  Â  setInterval(checkStatus, 1000);Â 
Â  </script>
</body>
</html>
